<!DOCTYPE html>
<html>
<head>
	<title>APCS Final Review</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link type="text/css" rel="stylesheet" href="materialize/css/materialize.min.css"  media="screen"/>
	<link rel="stylesheet" href="styles.css">
</head>
<body>

	<!-- Dropdown Structure -->
	<ul id='lessonDropdown' class='dropdown-content' id="dropdown-content">
		<li class="link-lesson" id="link-lesson-1"><a href="#!">One</a></li>
		<li class="link-lesson" id="link-lesson-2"><a href="#!">Two</a></li>
		<li class="link-lesson" id="link-lesson-3"><a href="#!">Three</a></li>
		<li class="link-lesson" id="link-lesson-4"><a href="#!">Four</a></li>
		<li class="link-lesson" id="link-lesson-5"><a href="#!">Five</a></li>
		<li class="link-lesson" id="link-lesson-6"><a href="#!">Six</a></li>
		<li class="link-lesson" id="link-lesson-7"><a href="#!">Seven</a></li>
		<li class="link-lesson" id="link-lesson-8"><a href="#!">Eight</a></li>
		<li class="link-lesson" id="link-lesson-9"><a href="#!">Nine</a></li>
	</ul>
	<nav class="blue darken-2">
		<div class="nav-wrapper">
			<div class="col s12">
				<a href="#!" class="brand-logo" style="margin-left:30px;text-decoration:none">APCS Final Review</a>
				<ul class="right side-nav" style="margin-left:30px">
					<li style="margin-right:40px"><a class="dropdown-button" href="#" data-activates='lessonDropdown'><span style="position:relative; top:-8px;left:-3px">Lesson</span><i class="mdi-navigation-arrow-drop-down right"></i></a></li>
				</ul>
			</div>
		</div>
	</nav>
	<div class="row">
		<div class="col l2 sidebar">
			<h3 style="margin-top:100px">Problems</h3>
			<div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 1</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 2</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 3</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 4</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 5</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 6</span>
		    </div>
		    <div class="card-panel grey waves-effect waves-light text-center darken-3">
		        <span class="white-text" style="font-size:24px;" id="set-title">Set 7</span>
		    </div>
		</div>

		<div class="col s9 content">
			<div class="container content-container">

			</div>
		</div>
	</div>

	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="materialize/js/materialize.min.js"></script>
	<script type="text/javascript" src="https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
	<script type="text/javascript" src="jquery.nicescroll.min.js"></script>
	<script src="https://cdn.firebase.com/js/client/2.0.6/firebase.js"></script>

	<script type="text/javascript">
	var newContent;
		$(document).ready(function(){

			var ref = new Firebase("https://apcsfinalreview.firebaseio.com/");
			//var newContent;
			//set defaults
			var lesson = 1;
			var set = 1;
			$(".link-lesson").click(function(){
				var num = $(this).attr('id').replace(/link-lesson-/,"");
				//console.log(parseInt(num));


				newContent = '<h2 class="header-text" style="padding-bottom:30px">Lesson ' + num+ '</h2>';

				var newRef = new Firebase("https://apcsfinalreview.firebaseio.com/2/1/problems");

				newRef.on("value", function(snapshot) {
				  var counter = 1;
				  var loopCount = 1;
				  //console.log(snapshot);
				  //console.log("ta");
				  
				  snapshot.forEach(function(childSnapshot){
				  	console.log(snapshot.numChildren());
				  	//console.log(childSnapshot.child(0).val());
				  	var build = '<div class=problem><div class=title><h5 class="header-text subheader">Problem ' + counter + '</h5></div><br><br><br><p class=problem-text>'+childSnapshot.child(0).val()+'</p><br><br><a class="waves-effect waves-light btn answer-show" style=text-decoration:none>Show Answer</a><br><pre style=display:none>'+childSnapshot.child(1).val()+'</pre></div>';

				  	//var build = "yd";
				  	newContent = newContent + build;
					counter++;
					if(loopCount >= snapshot.numChildren()){
						$(".content-container").html(newContent);
						$(".sidebar,.content").niceScroll({cursorcolor:"#757575"});
						return true;
					}

					loopCount++;
				  })
				}, function (errorObject) {
				  console.log("The read failed: " + errorObject.code);
				});
				
				

				//$(this).click();
			});


			// ref.on("value", function(snapshot) {
			//   console.log(snapshot.child('2-4').child('name').val());
			// }, function (errorObject) {
			//   console.log("The read failed: " + errorObject.code);
			// });





			$('.dropdown-button').dropdown();
			$('.btn').click(function(){
				$(".sidebar,.content").niceScroll({cursorcolor:"#757575"});
			});

			$(".sidebar,.content").niceScroll({cursorcolor:"#757575"});

			$('.answer-show').click(function() {
		        $('pre').slideToggle("fast");
		    });
		});
	</script> 
</body>
</html>